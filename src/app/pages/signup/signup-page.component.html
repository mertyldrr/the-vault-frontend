<div class="h-[calc(100vh-8rem)] flex flex-col justify-center bg-base-300">
  <div class="flex min-h-full justify-center p-4 items-center">
    <div
      class="relative transform overflow-hidden rounded-lg bg-white shadow-xl transition-all w-2/5">
      <div class="w-full py-8 px-6">
        <div class="flex items-start">
          <div class="w-full flex flex-col gap-y-3 p-2 relative">
            <div class="flex flex-col gap-y-4">
              <h3
                class="font-notoDisplay font-semibold text-[32px] leading-6 text-gray-900">
                Sign Up
              </h3>
              <p class="font-notoDisplay text-sm text-gray-500">
                Create an account to start creating your vault.
              </p>
            </div>

            <form
              [formGroup]="signupForm"
              (ngSubmit)="onSubmit()"
              class="flex flex-col gap-y-3">
              <div class="flex flex-row gap-x-8">
                <div class="flex flex-col w-full">
                  <label class="form-label" for="firstName">First Name</label>
                  <input
                    id="firstName"
                    class="form-input"
                    type="text"
                    [formControl]="signupForm.controls.firstName" />
                </div>
                <div class="flex flex-col w-full">
                  <label class="form-label" for="lastName">Last Name</label>
                  <input
                    id="lastName"
                    class="form-input"
                    type="text"
                    [formControl]="signupForm.controls.lastName" />
                </div>
              </div>
              <div class="flex flex-col">
                <label class="form-label" for="email">Email (*)</label>
                <input
                  id="email"
                  class="form-input"
                  type="text"
                  required
                  [formControl]="signupForm.controls.email" />
                @if (signupForm.controls.email.dirty) {
                  <div class="flex flex-col pt-1 pl-1">
                    <div class="flex flex-row items-center gap-x-2">
                      @if (signupForm.controls.email.errors?.['email']) {
                        <app-error-validation
                          text="Email format is not valid"
                          [icon]="faXmark"
                          textColor="text-error"
                          textSize="text-sm"></app-error-validation>
                      } @else {
                        <app-error-validation
                          text="Email format is valid"
                          [icon]="faCheck"
                          textColor="text-success"
                          textSize="text-sm"></app-error-validation>
                      }
                    </div>
                  </div>
                }
              </div>
              <div class="flex flex-col">
                <label class="form-label" for="password">Password (*)</label>
                <div class="relative">
                  <input
                    class="form-input block"
                    id="password"
                    required
                    [type]="passwordVisible ? 'text' : 'password'"
                    [formControl]="signupForm.controls.password" />
                  <fa-icon
                    class="absolute top-1/2 -translate-y-1/2 right-2 cursor-pointer"
                    (click)="togglePasswordVisibility()"
                    [icon]="passwordVisible ? faEyeSlash : faEye"></fa-icon>
                </div>
                @if (password?.dirty) {
                  <div class="flex flex-col pt-1 pl-1">
                    <div class="flex flex-row items-center gap-x-2">
                      @if (
                        signupForm.controls.password.errors?.['minLengthFailed']
                      ) {
                        <app-error-validation
                          text="At least 8 characters"
                          [icon]="faXmark"
                          textColor="text-error"
                          textSize="text-sm"></app-error-validation>
                      } @else {
                        <app-error-validation
                          text="At least 8 characters"
                          [icon]="faCheck"
                          textColor="text-success"
                          textSize="text-sm"></app-error-validation>
                      }
                    </div>
                    <div class="flex flex-row items-center gap-x-2">
                      @if (
                        signupForm.controls.password.errors?.['unmetLowercase']
                      ) {
                        <app-error-validation
                          text="At least one lower-case letter"
                          [icon]="faXmark"
                          textColor="text-error"
                          textSize="text-sm"></app-error-validation>
                      } @else {
                        <app-error-validation
                          text="At least one lower-case letter"
                          [icon]="faCheck"
                          textColor="text-success"
                          textSize="text-sm"></app-error-validation>
                      }
                    </div>
                    <div class="flex flex-row items-center">
                      @if (
                        signupForm.controls.password.errors?.['unmetUppercase']
                      ) {
                        <app-error-validation
                          text="At least one upper-case letter"
                          [icon]="faXmark"
                          textColor="text-error"
                          textSize="text-sm"></app-error-validation>
                      } @else {
                        <app-error-validation
                          text="At least one upper-case letter"
                          [icon]="faCheck"
                          textColor="text-success"
                          textSize="text-sm"></app-error-validation>
                      }
                    </div>
                  </div>
                }
              </div>
              <div class="flex flex-col">
                <label class="form-label" for="confirmPassword"
                  >Confirm Password (*)</label
                >
                <input
                  class="form-input"
                  id="confirmPassword"
                  type="password"
                  required
                  [formControl]="signupForm.controls.passwordConfirm" />
                @if (signupForm.controls.passwordConfirm.dirty) {
                  <div class="flex flex-row items-center pt-1 pl-1">
                    @if (signupForm.errors?.['passwordMismatch']) {
                      <app-error-validation
                        text="Passwords should match"
                        [icon]="faXmark"
                        textColor="text-error"
                        textSize="text-sm"></app-error-validation>
                    } @else {
                      <app-error-validation
                        text="Passwords should match"
                        [icon]="faCheck"
                        textColor="text-success"
                        textSize="text-sm"></app-error-validation>
                    }
                  </div>
                }
              </div>
              <div class="flex flex-col pt-6">
                <button
                  [disabled]="signupForm.invalid"
                  type="submit"
                  class="w-full flex flex-col justify-center items-center rounded-md bg-green-600 disabled:bg-neutral-300 px-3 py-3 text-white shadow-sm font-atkinson">
                  @if (isLoading) {
                    <app-loading-spinner></app-loading-spinner>
                  } @else {
                    {{ 'Sign Up' }}
                  }
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
